{
  "name": "cost-aware",
  "description": "Cost-optimized pipeline: budget limits, model routing (haiku→sonnet→opus), per-stage tracking",
  "defaults": {
    "test_cmd": "npm test",
    "model": "sonnet",
    "agents": 1,
    "cost_tracking": true,
    "budget_check": true
  },
  "stages": [
    {
      "id": "intake",
      "enabled": true,
      "gate": "auto",
      "config": {
        "model": "haiku",
        "cost_tracking": true
      }
    },
    {
      "id": "plan",
      "enabled": true,
      "gate": "approve",
      "config": {
        "model": "sonnet",
        "cost_tracking": true
      }
    },
    {
      "id": "build",
      "enabled": true,
      "gate": "auto",
      "config": {
        "model": "sonnet",
        "max_iterations": 20,
        "audit": true,
        "quality_gates": true,
        "cost_tracking": true,
        "abort_on_budget": true
      }
    },
    {
      "id": "test",
      "enabled": true,
      "gate": "auto",
      "config": {
        "coverage_min": 80,
        "model": "haiku",
        "cost_tracking": true
      }
    },
    {
      "id": "review",
      "enabled": true,
      "gate": "approve",
      "config": {
        "model": "opus",
        "cost_tracking": true
      }
    },
    {
      "id": "pr",
      "enabled": true,
      "gate": "approve",
      "config": {
        "wait_ci": false,
        "model": "haiku",
        "cost_tracking": true
      }
    },
    {
      "id": "deploy",
      "enabled": false,
      "gate": "approve",
      "config": {
        "staging_cmd": "",
        "production_cmd": "",
        "rollback_cmd": "",
        "cost_tracking": true
      }
    },
    {
      "id": "validate",
      "enabled": false,
      "gate": "auto",
      "config": {
        "smoke_cmd": "",
        "health_url": "",
        "close_issue": true,
        "cost_tracking": true
      }
    }
  ]
}
